<!DOCTYPE html>
<html lang="en">

<head>
    <title>Classic Model Shop</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="aStar Fashion Template Project">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="styles/bootstrap-4.1.3/bootstrap.css">
    <link href="plugins/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="plugins/OwlCarousel2-2.2.1/owl.carousel.css">
    <link rel="stylesheet" type="text/css" href="plugins/OwlCarousel2-2.2.1/owl.theme.default.css">
    <link rel="stylesheet" type="text/css" href="plugins/OwlCarousel2-2.2.1/animate.css">
    <link rel="stylesheet" type="text/css" href="styles/categories.css">

    <link rel="stylesheet" type="text/css" href="styles/search_bar.css">
    <link rel="stylesheet" type="text/css" href="styles/side_bar.css">
    <link rel="stylesheet" type="text/css" href="css/popup.css">
    <link rel="stylesheet" type="text/css" href="css/login_button.css">
    <link rel="icon" href="https://icon-library.net/images/3d-model-icon/3d-model-icon-24.jpg" type="image/x-icon" />
</head>

<body onload="login_onLoad()">

    <div class="super_container">

        <!-- Menu -->

        <div class="menu d-flex flex-column align-items-start justify-content-start menu_mm trans_400">
            <div class="menu_close_container">
                <div class="menu_close">
                    <div></div>
                    <div></div>
                </div>
            </div>
            <div class="menu_top d-flex flex-row align-items-center justify-content-start">

                <!-- Language -->
                <div class="info_languages has_children">
                    <div class="language_flag">
                        <img src="images/flag_1.svg" alt="https://www.flaticon.com/authors/freepik">
                    </div>
                    <div class="dropdown_text">english</div>
                    <div class="dropdown_arrow"><i class="fa fa-angle-down" aria-hidden="true"></i></div>

                    <!-- Language Dropdown Menu -->
                    <ul>
                        <li>
                            <a href="#">
                                <div class="language_flag">
                                    <img src="images/flag_2.svg" alt="https://www.flaticon.com/authors/freepik">
                                </div>
                                <div class="dropdown_text">french</div>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <div class="language_flag">
                                    <img src="images/flag_3.svg" alt="https://www.flaticon.com/authors/freepik">
                                </div>
                                <div class="dropdown_text">japanese</div>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <div class="language_flag">
                                    <img src="images/flag_4.svg" alt="https://www.flaticon.com/authors/freepik">
                                </div>
                                <div class="dropdown_text">russian</div>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <div class="language_flag">
                                    <img src="images/flag_5.svg" alt="https://www.flaticon.com/authors/freepik">
                                </div>
                                <div class="dropdown_text">spanish</div>
                            </a>
                        </li>
                    </ul>

                </div>

                <!-- Currency -->
                <div class="info_currencies has_children">
                    <div class="dropdown_text">usd</div>
                    <div class="dropdown_arrow"><i class="fa fa-angle-down" aria-hidden="true"></i></div>

                    <!-- Currencies Dropdown Menu -->
                    <ul>
                        <li>
                            <a href="#">
                                <div class="dropdown_text">EUR</div>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <div class="dropdown_text">YEN</div>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <div class="dropdown_text">GBP</div>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <div class="dropdown_text">CAD</div>
                            </a>
                        </li>
                    </ul>

                </div>

            </div>
            <div class="menu_search">
                <form action="#" class="header_search_form menu_mm">
                    <input type="search" class="search_input menu_mm" placeholder="Search" required="required">
                    <button class="header_search_button d-flex flex-column align-items-center justify-content-center menu_mm">
                        <i class="fa fa-search menu_mm" aria-hidden="true"></i>
                    </button>
                </form>
            </div>
            <nav class="menu_nav">
                <ul class="menu_mm">
                    <li class="menu_mm"><a href="index.html">home</a></li>
                    <li class="menu_mm"><a href="categories.html">catalog</a></li>
                    <li class="menu_mm"><a href="customer.html">membership</a></li>
                    <li class="menu_mm"><a href="#">order status</a></li>
                    <li class="menu_mm"><a href="blog.html">blog</a></li>
                    <li class="menu_mm"><a href="contact.html">contact</a></li>
                </ul>
            </nav>
            <div class="menu_extra">
                <div class="menu_social">
                    <ul>
                        <li><a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li>
                        <li><a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
                        <li><a href="#"><i class="fa fa-instagram" aria-hidden="true"></i></a></li>
                        <li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Sidebar -->

        <div class="sidebar">

            <!-- Logo -->
            <div class="sidebar_logo">
                <img src="images/Logo.png" alt="" width="200" length="200">
            </div>

            <ul class="list-unstyled components">
                <li>
                    <a href="#" onclick="return alertCheck('Finding')"> <img src="images/fiding.png" alt="" width="30" length="30">&nbsp; &nbsp; Finding </a>
                </li>

                <li>
                    <a href="#" onclick="return alertCheck('Cart')"> <img src="images/cart.png" alt="" width="30" length="30">&nbsp; &nbsp; Cart</a>
                </li>

                <li>
                    <a href="#" onclick="return alertCheck('Payment')"> <img src="images/payment.png" alt="" width="30" length="30">&nbsp; &nbsp; Payment</a>
                </li>

                <li>
                    <a href="#" onclick="return alertCheck('Order_Status')"> <img src="images/order status.png" alt="" width="30" length="30">&nbsp; &nbsp; Order Status</a>
                </li>

                <li>
                    <a href="#" onclick="return alertCheck('Membership')"> <img src="images/membership.png" alt="" width="30" length="30">&nbsp; &nbsp; Membership</a>
                </li>

                <li>
                    <a href="#" onclick="return alertCheck('Register')"> <img src="images/register.png" alt="" width="30" length="30">&nbsp; &nbsp; Register</a>
                </li>

                <li>
                    <a href="#" onclick="return alertCheck('Stocking')"> <img src="images/stocking.png" alt="" width="30" length="30">&nbsp; &nbsp; Stocking</a>
                </li>

                <li class="active">
                    <a href="#" onclick="return alertCheck('Promotion')"> <img src="images/promotion.png" alt="" width="30" length="30">&nbsp; &nbsp; Promotion</a>
                </li>

                <li>
                    <a href="#" onclick="return alertCheck('Management')"> <img src="images/management.png" alt="" width="30" length="30">&nbsp; &nbsp; Management</a>
                </li>
            </ul>
        </div>



        <!-- Products -->

        <div class="products">

    <!-- Sorting & Filtering -->
        <div class="products_bar">
            <div class="section_container">
                <div class="container">
                    <div class="logout_dropdown pull-right">
                            <button class="btn logout_button dropdown-toggle" type="button" id="logout_dropdownMenuButton"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Welcome!
                            </button>
                            <div class="logout_dropdown dropdown-menu" aria-labelledby="logout_dropdownMenuButton">
                                <a class="dropdown-item" onclick="logout()">Logout</a>
                            </div>
                    </div>
                        
                    <div class="row">
                        <div class="col">
                            <div class="products_bar_content d-flex flex-column flex-xxl-row align-items-start align-items-xxl-center justify-content-start">
                                <div class="product_button" style="display: inline-block" align="left">
                                    <a href="#addPromotion">Add</a>
                                </div>
                                <div class="product_button" style="display: inline-block" align="left" onclick="clearAllPromotion()">
                                    <a href="#">Clear All</a>
                                </div>
                                <div class="products_bar_side ml-xxl-auto d-flex flex-row align-items-center justify-content-start">

                                    <div class="products_dropdown text-right product_dropdown_filter">
                                        <div class="isotope_filter_text">
                                            <span id="getFilter">Search by</span><i class="fa fa-caret-down" aria-hidden="true"></i>
                                        </div>
                                        <ul>

                                            <li class="item_filter_btn">Code</li>
                                            <li class="item_filter_btn">Name</li>
                                            

                                        </ul>
                                    </div>

                                    <div class="cntr">
                                        <div class="cntr-innr">
                                            <label class="search" for="inpt_search">
                                                <input id="inpt_search" type="text" onkeyup="myFunctionPro(document.getElementById('getFilter').innerText)" />
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section_container">
            <div class="container">
                <div class="row">
                    <div class="col">
                        <div class="products_container grid"></div>
                        <table id="myTable">
                            <tr>
                                <th style="color:black" onclick="sortTableNumber(0)">Code</th>
                                <th style="color:black" onclick="sortTable(1)">Name</th>
                                <th style="color:black">Discount</th>
                                <th style="color:black">Amount</th>
                                
                                <th style="color:black">Expired Date</th>
                                <th style="color:black">Delete</th>
                            </tr>  
                            <body> 
                                <script>
                                    var db = openDatabase('mydata', '1.0', 'Test DB', 2 * 1024 * 1024);
                                    const list = document.querySelector('#myTable');
                                    db.transaction(function (tx) {
                                        var del = "DELETE FROM promotions WHERE julianday('now') >= julianday(expiredDate) OR amount <= '0'";
                                            tx.executeSql(del);
                                            tx.executeSql("SELECT * FROM promotions WHERE julianday('now') < julianday(expiredDate) AND amount > '0'", [], function (tx, results) {
                                                var len = results.rows.length, i;
                                                for (i = 0; i < len; i++) {
                                                    procode = results.rows.item(i).code
                                                    proname = results.rows.item(i).name
                                                    prodis = results.rows.item(i).discount
                                                    pamount = results.rows.item(i).amount
                                                
                                                    end = results.rows.item(i).expiredDate
                                                    console.log(procode);
                                                    console.log(proname);
                                                    console.log(prodis);
                                                    console.log(pamount);
                                                    console.log(end);
                                                    node = `
                                                    <tr>
                                                        <td  align="center" id="oldcode`+ i + `">` + procode + `</td>
                                                        <td  align="center">` + proname +`</td>
                                                        <td  align="center">` + prodis +`</td>
                                                        <td  align="center">` + pamount +`</td>
                                                        
                                                        <td  align="center">` + end + `</td>
                                                        <td><div class="product_button_red ml-auto mr-auto trans_200" style="display: inline-block"><a href="#delete`+ i + `">ERASE</a></div></td>
                                                        
                                                    </tr>
                                                    <div id="delete`+ i + `" class="overlay">
                                                        <div class="popup">
                                                            <h2>Confirmation</h2>
                                                            <a class="close" href="#">&times;</a>
                                                                <div class="product_button" style="display: inline-block">
                                                                    <a href="#">Cancel</a>
                                                                </div>
                                                                <div class="product_button_red" style="display: inline-block" onclick="deletePromotion(`+ i + `)">
                                                                    <a href="#">Confirm</a>
                                                                </div>
                                                        </div>
                                                    </div>
                                                    `;
                                                    list.insertAdjacentHTML('beforeend', node)
                                                }
                                            }, null);
                                        });       
                                </script>
                            </body>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="addPromotion" class="overlay">
        <div class="popup">
            <h2>Add New Promotion</h2>
            <a class="close" href="#">&times;</a>
            <h6>Code: <input type="text" id="pcode"></h6>
            <br> 
            <h6>Name: <input type="text" id="pname"></h6>
            <br>  
            <h6>Discount Price: <input type="number" id="pdis"></h6>
            <br>     
            <h6>Amount: <input type="number" min="1" id="psd"></h6>
            <br>  
            <h6>Expired Date: <input type="date" id="ped"></h6>
            <br>   
            
            <div class="product_button_new ml-auto mr-auto trans_200" style="display: inline-block" onclick="addPromotion()">
                <a href="#">Add</a>
            </div>
        </div>
    </div>
    </div>

    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="styles/bootstrap-4.1.3/popper.js"></script>
    <script src="styles/bootstrap-4.1.3/bootstrap.min.js"></script>
    <script src="plugins/greensock/TweenMax.min.js"></script>
    <script src="plugins/greensock/TimelineMax.min.js"></script>
    <script src="plugins/scrollmagic/ScrollMagic.min.js"></script>
    <script src="plugins/greensock/animation.gsap.min.js"></script>
    <script src="plugins/greensock/ScrollToPlugin.min.js"></script>
    <script src="plugins/OwlCarousel2-2.2.1/owl.carousel.js"></script>
    <script src="plugins/easing/easing.js"></script>
    <script src="plugins/parallax-js-master/parallax.min.js"></script>
    <script src="plugins/Isotope/isotope.pkgd.min.js"></script>
    <script src="plugins/Isotope/fitcolumns.js"></script>
    <script src="js/categories.js"></script>
    <script src="js/function.js"></script>
    <script src="js/search_bar.js"></script>
    <script src="js/logout.js"></script>
</body>

</html>